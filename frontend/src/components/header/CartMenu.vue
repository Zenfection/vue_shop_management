<script setup>

const userStore = UserStore()
if (!!userStore.user) {
    userStore.restoreState()
}

const isLogged = ref(userStore.isAuthenticated ?? false)

watchEffect(() => {
    isLogged.value = userStore.isAuthenticated ?? false
})
</script>


<template>
    <!-- Header Action Button Start -->
    <div class="header-action-btn header-action-btn-cart d-none d-sm-flex">
    <div class="cart-visible cursor-pointer">
        <i class="fa-duotone fa-bag-shopping fa-xl"></i>
        <!-- <?php
        if (!empty($user)) {
            $countCart = count($cart);
            echo "<span class='header-action-num' id='count-cart'>" . $countCart . "</span>";
        }
        ?> -->
    </div>

    <!-- Header Cart Content Start -->
    <div class="header-cart-content animate__animated">
        <!-- Cart Procut Wrapper Start  -->
        <div class="cart-product-wrapper">
            <!-- <?php
            if (!empty($user)) {
                foreach ($cart as $key => $value) {
                    $id = $value['id_product'];
                    $name = $value['name'];
                    $amount = $value['amount'];
                            $image = $value['image'];
                            $price = $value['price'];
                            $discount = $value['discount'];
                            $discount_price = $price - ($price * $discount / 100);

                    $cart_product = [
                        'id' => $id,
                                'name' => $name,
                                'amount' => $amount,
                                'image' => $image,
                                'price' => number_price($price),
                                'discount' => $discount,
                                'discount_price' => number_price($discount_price),
                            ];
            ?> -->
            <!-- Cart Product/Price Start -->
            <!-- <?php $this->render('blocks/cart_product', $cart_product)?> -->
            <!-- Cart Product/Price End -->
            <!-- <?php
                }
            }
                    ?> -->
            </div>
            <!-- Cart Procut Wrapper -->

            <!-- Cart Product Total Start -->
            <div class="cart-product-total p-b-20 m-b-20 border-bottom">
                <span class="value">Tổng tiền</span>
                <!-- <?php
                    if(!empty($user)){
                        //number format
                        echo "<span class='value' id='totalmoney'>" . number_price($total_money) . "</span>";
                    } else {
                        echo "<span class='value' id='totalmoney'>0 </span>";
                    }
                    ?> -->
            </div>
            <!-- Cart Product Total End -->

            <!-- Cart Product Button Start -->
            <div class="cart-product-btn m-t-20">
                <RouterLink to="" class="btn btn-outline-light btn-hover-primary w-100">Giỏ Hàng</RouterLink>
                <RouterLink to="" class="btn btn-outline-light btn-hover-primary w-100 m-t-20">Thanh Toán</RouterLink>
            </div>
            <!-- Cart Product Button End -->
        </div>
        <!-- Header Cart Content End -->
    </div>

    <mobile-reponsitive></mobile-reponsitive>
</template>